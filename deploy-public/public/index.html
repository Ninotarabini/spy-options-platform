<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SPY 0DTE Monitor - IBKR</title>
<link rel="stylesheet" href="styles.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
<!-- SignalR Client Library -->
    <script src="https://cdn.jsdelivr.net/npm/@microsoft/signalr@8.0.0/dist/browser/signalr.min.js"></script>
</head>
<body>
    <div class="container">
        <!-- Language Toggle -->
        <div class="lang-toggle">
            <div class="lang-toggle-inner">
                <button class="lang-btn active" onclick="switchLanguage('en')" id="btn-en">üá¨üáß EN</button>
                <button class="lang-btn" onclick="switchLanguage('es')" id="btn-es">üá™üá∏ ES</button>
            </div>
        </div>
        
        <div class="header">
            <div>
                <div style="font-size: 12px; color: #888; margin-bottom: 5px;" data-i18n="spyCurrentPrice">SPY Current Price</div>
                <div class="spy-info">
                    <div class="spy-price">$684.23</div>
                    <div class="price-change positive">+0.45%</div>
                </div>
                <div style="margin-top: 8px;">
                    <span class="status" data-i18n="statusLive">‚óè LIVE - IBKR Connected</span>
                </div>
            </div>
            <div class="range-info">
                <div><span data-i18n="monitoredRange">Monitored Range</span>: <span class="range-value">¬±1%</span></div>
                <div><span data-i18n="maxStrike">Max Strike</span>: <span class="range-value">$690.87</span></div>
                <div><span data-i18n="minStrike">Min Strike</span>: <span class="range-value">$677.59</span></div>
                <div style="margin-top: 8px; color: #888; font-size: 12px;"><span data-i18n="updateFreq">Update: Every 2sec</span></div>
            </div>
        </div>
        
        <div class="main-grid">
            <!-- Gr√°fico Temporal -->
            <div class="panel">
                <div class="panel-title" data-i18n="chartTitle">üìä Real-Time Cumulative Volume (Last 2 Hours)</div>
                <div class="chart-panel">
                    <div class="chart-wrapper">
                        <canvas id="volumeChart"></canvas>
                    </div>
                    <div class="chart-legend">
                        <div class="legend-item">
                            <div class="legend-color legend-calls"></div>
                            <span data-i18n="volumeCalls">CALLs Volume</span>
                        </div>
                        <div class="legend-item">
                            <div class="legend-color legend-puts"></div>
                            <span data-i18n="volumePuts">PUTs Volume</span>
                        </div>
                        <div class="legend-item">
                            <div class="legend-color legend-spy"></div>
                            <span data-i18n="spyPrice">SPY Price ($684.23)</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Alertas y Anomal√≠as -->
            <div class="panel">
                <div class="panel-title" data-i18n="alertsTitle">üö® Detected Anomaly Alerts</div>
                <div class="alert-item">
                    <div>
                        <strong>CALL $591.00</strong> - <span data-i18n="alert1">83% price drop vs previous strike ($2.65 ‚Üí $0.45)</span>
                        <div style="margin-top: 5px; font-size: 12px; color: #888;">
                            üî¥ <span data-i18n="alert1Detail">Wide bid-ask spread detected | Abnormal Bid/Ask ratio (32%/68%)</span>
                        </div>
                    </div>
                    <div class="alert-time">14:32:18</div>
                </div>
                <div class="alert-item">
                    <div>
                        <strong>ATM Strike $587.00</strong> - <span data-i18n="alert2">Strong buying pressure on CALLs (56% bid) vs selling pressure on PUTs (56% ask)</span>
                        <div style="margin-top: 5px; font-size: 12px; color: #888;">
                            üü¢ <span data-i18n="alert2Detail">Possible institutional bullish sentiment</span>
                        </div>
                    </div>
                    <div class="alert-time">14:28:45</div>
                </div>
                <div class="alert-item">
                    <div>
                        <strong>PUT $591.00</strong> - <span data-i18n="alert3">Unusually high ask volume (62%) indicating aggressive put selling</span>
                        <div style="margin-top: 5px; font-size: 12px; color: #888;">
                            ‚ö† <span data-i18n="alert3Detail">Possible protection sale or covered puts strategy</span>
                        </div>
                    </div>
                    <div class="alert-time">14:25:12</div>
                </div>
            </div>
            
            <!-- Vista Confrontada -->
            <div class="panel">
                <div class="panel-title" data-i18n="confrontedView">üìä CONFRONTED VIEW - 7 Strikes Around ATM</div>
                <table class="options-table">
                    <thead>
                        <tr>
                            <th colspan="5" style="background: rgba(0, 255, 136, 0.1);">üìà CALLS</th>
                            <th style="background: rgba(0, 212, 255, 0.2);">STRIKE</th>
                            <th colspan="5" style="background: rgba(255, 100, 100, 0.1);">üìâ PUTS</th>
                        </tr>
                        <tr>
                            <th class="call-section" data-i18n="price">Price</th>
                            <th class="call-section" data-i18n="totalVol">Total Vol</th>
                            <th class="call-section" data-i18n="bidVol">Bid Vol</th>
                            <th class="call-section" data-i18n="askVol">Ask Vol</th>
                            <th class="call-section" data-i18n="flowVisual">Flow Visual</th>
                            <th style="background: rgba(0, 212, 255, 0.2);">$</th>
                            <th class="put-section" data-i18n="flowVisual">Flow Visual</th>
                            <th class="put-section" data-i18n="bidVol">Bid Vol</th>
                            <th class="put-section" data-i18n="askVol">Ask Vol</th>
                            <th class="put-section" data-i18n="totalVol">Total Vol</th>
                            <th class="put-section" data-i18n="price">Price</th>
                        </tr>
                    </thead>
                    <tbody>
                        <!-- Strike -3 -->
                        <tr>
                            <td class="call-section price-positive">$11.25</td>
                            <td class="call-section">8,240</td>
                            <td class="call-section bid-volume">5,820</td>
                            <td class="call-section ask-volume">2,420</td>
                            <td class="call-section">
                                <div class="volume-bar-container">
                                    <div class="bid-bar volume-bar" style="width: 71%;">71%</div>
                                    <div class="ask-bar volume-bar" style="width: 29%;">29%</div>
                                </div>
                            </td>
                            <td class="strike-cell">$581.00</td>
                            <td class="put-section">
                                <div class="volume-bar-container">
                                    <div class="bid-bar volume-bar" style="width: 45%;">45%</div>
                                    <div class="ask-bar volume-bar" style="width: 55%;">55%</div>
                                </div>
                            </td>
                            <td class="put-section bid-volume">2,340</td>
                            <td class="put-section ask-volume">2,860</td>
                            <td class="put-section">5,200</td>
                            <td class="put-section price-negative">$0.65</td>
                        </tr>
                        
                        <!-- Strike -2 -->
                        <tr>
                            <td class="call-section price-positive">$8.90</td>
                            <td class="call-section">12,680</td>
                            <td class="call-section bid-volume">7,450</td>
                            <td class="call-section ask-volume">5,230</td>
                            <td class="call-section">
                                <div class="volume-bar-container">
                                    <div class="bid-bar volume-bar" style="width: 59%;">59%</div>
                                    <div class="ask-bar volume-bar" style="width: 41%;">41%</div>
                                </div>
                            </td>
                            <td class="strike-cell">$583.00</td>
                            <td class="put-section">
                                <div class="volume-bar-container">
                                    <div class="bid-bar volume-bar" style="width: 52%;">52%</div>
                                    <div class="ask-bar volume-bar" style="width: 48%;">48%</div>
                                </div>
                            </td>
                            <td class="put-section bid-volume">4,120</td>
                            <td class="put-section ask-volume">3,800</td>
                            <td class="put-section">7,920</td>
                            <td class="put-section price-negative">$1.35</td>
                        </tr>
                        
                        <!-- Strike -1 -->
                        <tr>
                            <td class="call-section price-positive">$6.45</td>
                            <td class="call-section">18,340</td>
                            <td class="call-section bid-volume">9,820</td>
                            <td class="call-section ask-volume">8,520</td>
                            <td class="call-section">
                                <div class="volume-bar-container">
                                    <div class="bid-bar volume-bar" style="width: 54%;">54%</div>
                                    <div class="ask-bar volume-bar" style="width: 46%;">46%</div>
                                </div>
                            </td>
                            <td class="strike-cell">$585.00</td>
                            <td class="put-section">
                                <div class="volume-bar-container">
                                    <div class="bid-bar volume-bar" style="width: 48%;">48%</div>
                                    <div class="ask-bar volume-bar" style="width: 52%;">52%</div>
                                </div>
                            </td>
                            <td class="put-section bid-volume">6,240</td>
                            <td class="put-section ask-volume">6,760</td>
                            <td class="put-section">13,000</td>
                            <td class="put-section price-negative">$2.80</td>
                        </tr>
                        
                        <!-- ATM Strike -->
                        <tr class="atm-row">
                            <td class="call-section price-positive"><strong>$4.15</strong></td>
                            <td class="call-section"><strong>24,560</strong></td>
                            <td class="call-section bid-volume"><strong>13,840</strong></td>
                            <td class="call-section ask-volume"><strong>10,720</strong></td>
                            <td class="call-section">
                                <div class="volume-bar-container">
                                    <div class="bid-bar volume-bar" style="width: 56%;">56%</div>
                                    <div class="ask-bar volume-bar" style="width: 44%;">44%</div>
                                </div>
                            </td>
                            <td class="strike-cell">$587.00 <span style="font-size: 11px; color: #00ff88;">‚óè ATM</span></td>
                            <td class="put-section">
                                <div class="volume-bar-container">
                                    <div class="bid-bar volume-bar" style="width: 44%;">44%</div>
                                    <div class="ask-bar volume-bar" style="width: 56%;">56%</div>
                                </div>
                            </td>
                            <td class="put-section bid-volume"><strong>8,120</strong></td>
                            <td class="put-section ask-volume"><strong>10,340</strong></td>
                            <td class="put-section"><strong>18,460</strong></td>
                            <td class="put-section price-negative"><strong>$4.35</strong></td>
                        </tr>
                        
                        <!-- Strike +1 -->
                        <tr>
                            <td class="call-section price-positive">$2.65</td>
                            <td class="call-section">15,820</td>
                            <td class="call-section bid-volume">7,240</td>
                            <td class="call-section ask-volume">8,580</td>
                            <td class="call-section">
                                <div class="volume-bar-container">
                                    <div class="bid-bar volume-bar" style="width: 46%;">46%</div>
                                    <div class="ask-bar volume-bar" style="width: 54%;">54%</div>
                                </div>
                            </td>
                            <td class="strike-cell">$589.00</td>
                            <td class="put-section">
                                <div class="volume-bar-container">
                                    <div class="bid-bar volume-bar" style="width: 51%;">51%</div>
                                    <div class="ask-bar volume-bar" style="width: 49%;">49%</div>
                                </div>
                            </td>
                            <td class="put-section bid-volume">7,140</td>
                            <td class="put-section ask-volume">6,860</td>
                            <td class="put-section">14,000</td>
                            <td class="put-section price-negative">$6.85</td>
                        </tr>
                        
                        <!-- Strike +2 - ANOMALY -->
                        <tr class="anomaly">
                            <td class="call-section price-positive">$0.45<span class="alert-badge">‚ö† ANOMALY</span></td>
                            <td class="call-section">4,220</td>
                            <td class="call-section bid-volume">1,340</td>
                            <td class="call-section ask-volume">2,880</td>
                            <td class="call-section">
                                <div class="volume-bar-container">
                                    <div class="bid-bar volume-bar" style="width: 32%;">32%</div>
                                    <div class="ask-bar volume-bar" style="width: 68%;">68%</div>
                                </div>
                            </td>
                            <td class="strike-cell">$591.00</td>
                            <td class="put-section">
                                <div class="volume-bar-container">
                                    <div class="bid-bar volume-bar" style="width: 38%;">38%</div>
                                    <div class="ask-bar volume-bar" style="width: 62%;">62%</div>
                                </div>
                            </td>
                            <td class="put-section bid-volume">3,240</td>
                            <td class="put-section ask-volume">5,280</td>
                            <td class="put-section">8,520</td>
                            <td class="put-section price-negative">$10.25</td>
                        </tr>
                        
                        <!-- Strike +3 -->
                        <tr>
                            <td class="call-section price-positive">$0.15</td>
                            <td class="call-section">2,480</td>
                            <td class="call-section bid-volume">890</td>
                            <td class="call-section ask-volume">1,590</td>
                            <td class="call-section">
                                <div class="volume-bar-container">
                                    <div class="bid-bar volume-bar" style="width: 36%;">36%</div>
                                    <div class="ask-bar volume-bar" style="width: 64%;">64%</div>
                                </div>
                            </td>
                            <td class="strike-cell">$593.00</td>
                            <td class="put-section">
                                <div class="volume-bar-container">
                                    <div class="bid-bar volume-bar" style="width: 47%;">47%</div>
                                    <div class="ask-bar volume-bar" style="width: 53%;">53%</div>
                                </div>
                            </td>
                            <td class="put-section bid-volume">2,820</td>
                            <td class="put-section ask-volume">3,180</td>
                            <td class="put-section">6,000</td>
                            <td class="put-section price-negative">$14.50</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>

<!-- Configuration (load before app.js) -->
<script src="config.js"></script>
<script src="app.js"></script>    
</body>
</html>
