<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SPY Options - Hybrid Cloud Architecture with Terraform</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #0a0e27 0%, #1a1a2e 100%);
            color: #fff;
            padding: 20px;
            overflow-x: auto;
        }
        
        .container {
            max-width: 1800px;
            margin: 0 auto;
        }
        
        .title {
            text-align: center;
            font-size: 32px;
            margin-bottom: 10px;
            color: #00d4ff;
            text-shadow: 0 0 20px rgba(0, 212, 255, 0.5);
        }
        
        .subtitle {
            text-align: center;
            font-size: 16px;
            color: #888;
            margin-bottom: 40px;
        }
        
        .architecture {
            display: grid;
            grid-template-columns: 1fr 150px 1fr;
            gap: 20px;
            margin-bottom: 40px;
        }
        
        /* Azure Cloud Section */
        .cloud-section {
            background: linear-gradient(135deg, rgba(0, 120, 212, 0.15), rgba(0, 212, 255, 0.1));
            border: 2px solid #0078d4;
            border-radius: 15px;
            padding: 25px;
            position: relative;
        }
        
        .cloud-header {
            background: #0078d4;
            color: #fff;
            padding: 12px 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            font-size: 20px;
            font-weight: bold;
            text-align: center;
            box-shadow: 0 4px 15px rgba(0, 120, 212, 0.4);
        }
        
        .azure-icon {
            display: inline-block;
            margin-right: 10px;
            font-size: 24px;
        }
        
        /* On-Premises Infrastructure Section */
        .onprem-section {
            background: linear-gradient(135deg, rgba(255, 136, 0, 0.15), rgba(255, 200, 0, 0.1));
            border: 2px solid #ff8800;
            border-radius: 15px;
            padding: 25px;
            position: relative;
        }
        
        .onprem-header {
            background: #ff8800;
            color: #000;
            padding: 12px 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            font-size: 20px;
            font-weight: bold;
            text-align: center;
            box-shadow: 0 4px 15px rgba(255, 136, 0, 0.4);
        }
        
        /* Component boxes */
        .component {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 15px;
            transition: all 0.3s;
            position: relative;
        }
        
        .component:hover {
            background: rgba(255, 255, 255, 0.1);
            transform: translateX(5px);
            box-shadow: 0 5px 20px rgba(0, 212, 255, 0.3);
        }
        
        .component-title {
            font-size: 16px;
            font-weight: bold;
            color: #00ff88;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .component-icon {
            font-size: 20px;
        }
        
        .component-desc {
            font-size: 13px;
            color: #aaa;
            line-height: 1.5;
        }
        
        .component-tech {
            font-size: 11px;
            color: #00d4ff;
            margin-top: 5px;
            font-style: italic;
        }
        
        /* Connection section */
        .connection-section {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            position: relative;
        }
        
        .connection-box {
            background: linear-gradient(135deg, rgba(255, 215, 0, 0.2), rgba(255, 140, 0, 0.2));
            border: 2px solid #ffd700;
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            position: relative;
            box-shadow: 0 0 30px rgba(255, 215, 0, 0.3);
        }
        
        .connection-title {
            font-size: 18px;
            font-weight: bold;
            color: #ffd700;
            margin-bottom: 15px;
        }
        
        .connection-type {
            font-size: 14px;
            color: #fff;
            background: rgba(255, 215, 0, 0.2);
            padding: 8px 15px;
            border-radius: 8px;
            margin-bottom: 10px;
        }
        
        .latency {
            font-size: 12px;
            color: #00ff88;
            margin-top: 10px;
        }
        
        /* Data flows */
        .flow-arrow {
            position: absolute;
            font-size: 40px;
            color: #00ff88;
            animation: pulse-arrow 2s infinite;
        }
        
        @keyframes pulse-arrow {
            0%, 100% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.5; transform: scale(1.1); }
        }
        
        .arrow-right {
            right: -30px;
            top: 50%;
            transform: translateY(-50%);
        }
        
        .arrow-left {
            left: -30px;
            top: 50%;
            transform: translateY(-50%);
        }
        
        /* Terraform Section */
        .terraform-section {
            background: linear-gradient(135deg, rgba(92, 43, 255, 0.15), rgba(124, 58, 237, 0.1));
            border: 2px solid #7c3aed;
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 30px;
        }
        
        .terraform-header {
            background: #7c3aed;
            color: #fff;
            padding: 12px 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            font-size: 20px;
            font-weight: bold;
            text-align: center;
            box-shadow: 0 4px 15px rgba(124, 58, 237, 0.4);
        }
        
        .terraform-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
        }
        
        /* External Services */
        .external-section {
            background: rgba(255, 255, 255, 0.03);
            border: 2px dashed rgba(255, 255, 255, 0.2);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 30px;
        }
        
        .external-header {
            font-size: 18px;
            color: #00d4ff;
            margin-bottom: 15px;
            text-align: center;
        }
        
        .external-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
        }
        
        /* Data Flow Indicators */
        .flow-indicator {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 12px;
            color: #888;
            margin-top: 10px;
            padding: 8px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 5px;
        }
        
        .flow-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            animation: blink 1.5s infinite;
        }
        
        .flow-in { background: #00ff88; }
        .flow-out { background: #ff0064; }
        .flow-bidirectional { background: #ffd700; }
        
        @keyframes blink {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.3; }
        }
        
        /* Legend */
        .legend {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin-top: 30px;
            padding: 20px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
        }
        
        .legend-item {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 13px;
        }
        
        .legend-color {
            width: 20px;
            height: 20px;
            border-radius: 3px;
        }
        
        /* Cost indicator */
        .cost-badge {
            display: inline-block;
            background: rgba(0, 255, 136, 0.2);
            color: #00ff88;
            padding: 4px 10px;
            border-radius: 5px;
            font-size: 11px;
            font-weight: bold;
            margin-left: 10px;
        }
        
        .terraform-badge {
            display: inline-block;
            background: rgba(124, 58, 237, 0.3);
            color: #a78bfa;
            padding: 4px 10px;
            border-radius: 5px;
            font-size: 11px;
            font-weight: bold;
            margin-left: 5px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1 class="title">üöÄ SPY Options Trading - Hybrid Cloud Architecture</h1>
        <p class="subtitle">Infrastructure as Code with Terraform | Azure Cloud + On-Premises Edge Infrastructure</p>
        
        <!-- Terraform Layer -->
        <div class="terraform-section">
            <div class="terraform-header">
                <span>‚ö°</span> TERRAFORM - Infrastructure as Code Layer
            </div>
            <div class="terraform-grid">
                <div class="component">
                    <div class="component-title">
                        <span class="component-icon">üìÅ</span>
                        Terraform Modules
                    </div>
                    <div class="component-desc">
                        ‚Ä¢ networking/ (VPN, NSG, VNet)<br>
                        ‚Ä¢ app-service/ (Backend API)<br>
                        ‚Ä¢ static-web/ (Dashboard)<br>
                        ‚Ä¢ signalr/ (Real-time messaging)<br>
                        ‚Ä¢ monitoring/ (App Insights)<br>
                        ‚Ä¢ acr/ (Container Registry)<br>
                        ‚Ä¢ container-instances/ (Optional)
                    </div>
                    <div class="component-tech">HCL, Azure Provider</div>
                </div>
                
                <div class="component">
                    <div class="component-title">
                        <span class="component-icon">üîÑ</span>
                        CI/CD Pipeline
                    </div>
                    <div class="component-desc">
                        ‚Ä¢ GitHub Actions workflow<br>
                        ‚Ä¢ Terraform plan on PR<br>
                        ‚Ä¢ Auto-apply on merge to main<br>
                        ‚Ä¢ Remote state in Azure Storage<br>
                        ‚Ä¢ Automated rollback
                    </div>
                    <div class="component-tech">GitHub Actions, Azure Backend</div>
                </div>
                
                <div class="component">
                    <div class="component-title">
                        <span class="component-icon">üåç</span>
                        Multi-Environment
                    </div>
                    <div class="component-desc">
                        ‚Ä¢ Dev environment (low-cost)<br>
                        ‚Ä¢ Prod environment (HA)<br>
                        ‚Ä¢ Environment-specific variables<br>
                        ‚Ä¢ Identical infrastructure<br>
                        ‚Ä¢ Parallel deployment
                    </div>
                    <div class="component-tech">Workspaces, tfvars</div>
                </div>
                
                <div class="component">
                    <div class="component-title">
                        <span class="component-icon">üîê</span>
                        Secrets Management
                    </div>
                    <div class="component-desc">
                        ‚Ä¢ Azure Key Vault integration<br>
                        ‚Ä¢ Rotatable IBKR API keys<br>
                        ‚Ä¢ VPN pre-shared keys<br>
                        ‚Ä¢ Connection strings<br>
                        ‚Ä¢ GitHub Secrets
                    </div>
                    <div class="component-tech">Key Vault, GitHub Secrets</div>
                </div>
            </div>
        </div>
        
        <!-- Container & Orchestration Layer -->
        <div class="terraform-section" style="background: linear-gradient(135deg, rgba(0, 149, 255, 0.15), rgba(0, 212, 255, 0.1)); border-color: #0095ff;">
            <div class="terraform-header" style="background: #0095ff;">
                <span>üê≥</span> CONTAINER & ORCHESTRATION LAYER
            </div>
            <div class="terraform-grid">
                <div class="component">
                    <div class="component-title">
                        <span class="component-icon">üêã</span>
                        Docker Images
                    </div>
                    <div class="component-desc">
                        ‚Ä¢ spy-backend:v1.2 (Backend API)<br>
                        ‚Ä¢ spy-trading-bot:v1.2 (Trading engine)<br>
                        ‚Ä¢ spy-detector:v1.0 (Anomaly detection)<br>
                        ‚Ä¢ ibkr-gateway:stable (TWS headless)<br>
                        ‚Ä¢ fluentd:v1.16 (Log forwarder)
                    </div>
                    <div class="component-tech">Multi-stage Dockerfiles | Alpine base</div>
                </div>
                
                <div class="component">
                    <div class="component-title">
                        <span class="component-icon">‚ò∏Ô∏è</span>
                        Kubernetes Resources
                    </div>
                    <div class="component-desc">
                        ‚Ä¢ Deployments: 3 replicas per service<br>
                        ‚Ä¢ Services: ClusterIP + LoadBalancer<br>
                        ‚Ä¢ StatefulSets: For IBKR gateway<br>
                        ‚Ä¢ DaemonSets: For monitoring agents<br>
                        ‚Ä¢ CronJobs: Daily cleanup tasks
                    </div>
                    <div class="component-tech">kubectl | K8s API v1.28</div>
                </div>
                
                <div class="component">
                    <div class="component-title">
                        <span class="component-icon">üéõÔ∏è</span>
                        Container Orchestration
                    </div>
                    <div class="component-desc">
                        ‚Ä¢ Auto-scaling: HPA based on CPU/Memory<br>
                        ‚Ä¢ Self-healing: Restart on failure<br>
                        ‚Ä¢ Rolling updates: Zero downtime<br>
                        ‚Ä¢ Resource quotas: Per namespace<br>
                        ‚Ä¢ Network policies: Pod isolation
                    </div>
                    <div class="component-tech">K8s Controllers | HPA | Network Policies</div>
                </div>
                
                <div class="component">
                    <div class="component-title">
                        <span class="component-icon">üîÑ</span>
                        CI/CD for Containers
                    </div>
                    <div class="component-desc">
                        ‚Ä¢ Build: Docker build on PR merge<br>
                        ‚Ä¢ Test: Container security scanning<br>
                        ‚Ä¢ Push: Tag & push to ACR<br>
                        ‚Ä¢ Deploy: Helm upgrade via GitHub Actions<br>
                        ‚Ä¢ Rollback: Automatic on failure
                    </div>
                    <div class="component-tech">GitHub Actions | Docker | Helm</div>
                </div>
            </div>
            
            <div style="margin-top: 20px; padding: 15px; background: rgba(0, 0, 0, 0.3); border-radius: 10px; border-left: 4px solid #0095ff;">
                <div style="font-size: 14px; font-weight: bold; color: #0095ff; margin-bottom: 10px;">üì¶ Container Deployment Flow:</div>
                <div style="font-size: 12px; color: #aaa; line-height: 1.8;">
                    1Ô∏è‚É£ <strong>Code Push:</strong> Developer pushes to GitHub main branch<br>
                    2Ô∏è‚É£ <strong>CI Trigger:</strong> GitHub Actions workflow starts automatically<br>
                    3Ô∏è‚É£ <strong>Build:</strong> Docker multi-stage build creates optimized images<br>
                    4Ô∏è‚É£ <strong>Scan:</strong> Security vulnerability scanning (Trivy/Snyk)<br>
                    5Ô∏è‚É£ <strong>Push:</strong> Tagged images pushed to Azure Container Registry<br>
                    6Ô∏è‚É£ <strong>Deploy:</strong> Helm chart upgrade on edge K8s cluster<br>
                    7Ô∏è‚É£ <strong>Rollout:</strong> Rolling update with zero downtime (3 replicas)<br>
                    8Ô∏è‚É£ <strong>Verify:</strong> Health checks validate deployment success<br>
                    9Ô∏è‚É£ <strong>Monitor:</strong> Prometheus collects metrics from new pods
                </div>
            </div>
        </div>
        
        <!-- Main Architecture -->
        <div class="architecture">
            <!-- Azure Cloud -->
            <div class="cloud-section">
                <div class="cloud-header">
                    <span class="azure-icon">‚òÅÔ∏è</span>
                    AZURE CLOUD
                    <span class="cost-badge">~$53/mo</span>
                    <span class="terraform-badge">TF managed</span>
                </div>
                
                <div class="component">
                    <div class="component-title">
                        <span class="component-icon">üåê</span>
                        VPN Gateway
                    </div>
                    <div class="component-desc">
                        Site-to-Site VPN to On-Premises Edge<br>
                        IPsec encrypted tunnel<br>
                        Static routing configured
                    </div>
                    <div class="component-tech">azurerm_virtual_network_gateway</div>
                    <div class="flow-indicator">
                        <div class="flow-dot flow-bidirectional"></div>
                        Bidirectional | Latency: ~15-30ms
                    </div>
                </div>
                
                <div class="component">
                    <div class="component-title">
                        <span class="component-icon">üê≥</span>
                        Azure Container Registry (ACR)
                    </div>
                    <div class="component-desc">
                        Private Docker image repository<br>
                        Multi-architecture support (amd64/arm64)<br>
                        Geo-replication enabled<br>
                        Automated vulnerability scanning
                    </div>
                    <div class="component-tech">azurerm_container_registry</div>
                    <div class="flow-indicator">
                        <div class="flow-dot flow-bidirectional"></div>
                        Push/Pull: CI/CD + Edge K8s cluster
                    </div>
                </div>
                
                <div class="component">
                    <div class="component-title">
                        <span class="component-icon">üì¶</span>
                        Container Instances (Optional)
                    </div>
                    <div class="component-desc">
                        Serverless container deployment<br>
                        Backend API containers<br>
                        Auto-scaling based on load<br>
                        Pay-per-second billing
                    </div>
                    <div class="component-tech">azurerm_container_group</div>
                </div>
                
                <div class="component">
                    <div class="component-title">
                        <span class="component-icon">üîí</span>
                        Network Security Group
                    </div>
                    <div class="component-desc">
                        Dynamic firewall rule management<br>
                        Whitelist on-premises public IP<br>
                        Connection audit logging enabled<br>
                        DDoS protection tier integrated
                    </div>
                    <div class="component-tech">azurerm_network_security_group</div>
                </div>
                
                <div class="component">
                    <div class="component-title">
                        <span class="component-icon">‚öôÔ∏è</span>
                        App Service (Backend API)
                    </div>
                    <div class="component-desc">
                        Python Flask/FastAPI REST API<br>
                        IBKR TWS API integration layer<br>
                        Real-time strike data processing<br>
                        Anomaly detection algorithms
                    </div>
                    <div class="component-tech">azurerm_linux_web_app | Python 3.11</div>
                    <div class="flow-indicator">
                        <div class="flow-dot flow-out"></div>
                        Publishes signals ‚Üí SignalR Hub
                    </div>
                </div>
                
                <div class="component">
                    <div class="component-title">
                        <span class="component-icon">üì°</span>
                        SignalR Service
                    </div>
                    <div class="component-desc">
                        Real-time WebSocket infrastructure<br>
                        Alert broadcast to edge subscribers<br>
                        Persistent connection management<br>
                        Auto-scaling enabled
                    </div>
                    <div class="component-tech">azurerm_signalr_service</div>
                    <div class="flow-indicator">
                        <div class="flow-dot flow-out"></div>
                        Stream ‚Üí On-Premises Trading Engine
                    </div>
                </div>
                
                <div class="component">
                    <div class="component-title">
                        <span class="component-icon">üåê</span>
                        Static Web App (Dashboard)
                    </div>
                    <div class="component-desc">
                        HTML5 Canvas + JavaScript SPA<br>
                        Public-facing analytics dashboard<br>
                        Azure CDN global distribution<br>
                        SSL/TLS encryption enabled
                    </div>
                    <div class="component-tech">azurerm_static_site</div>
                </div>
                
                <div class="component">
                    <div class="component-title">
                        <span class="component-icon">üìä</span>
                        Application Insights
                    </div>
                    <div class="component-desc">
                        Distributed tracing across hybrid infrastructure<br>
                        Edge telemetry aggregation<br>
                        Automated alert rules configured<br>
                        Custom KPI dashboards
                    </div>
                    <div class="component-tech">azurerm_application_insights</div>
                    <div class="flow-indicator">
                        <div class="flow-dot flow-in"></div>
                        Ingests telemetry from edge nodes
                    </div>
                </div>
                
                <div class="component">
                    <div class="component-title">
                        <span class="component-icon">üíæ</span>
                        Table Storage
                    </div>
                    <div class="component-desc">
                        Anomaly event history retention<br>
                        Trade execution audit log<br>
                        Daily metrics aggregation
                    </div>
                    <div class="component-tech">azurerm_storage_account</div>
                </div>
                
                <div class="component">
                    <div class="component-title">
                        <span class="component-icon">üîë</span>
                        Key Vault
                    </div>
                    <div class="component-desc">
                        IBKR API credentials<br>
                        VPN pre-shared key<br>
                        Connection strings<br>
                        Automated key rotation
                    </div>
                    <div class="component-tech">azurerm_key_vault</div>
                </div>
            </div>
            
            <!-- Connection -->
            <div class="connection-section">
                <div class="connection-box">
                    <div class="connection-title">üîê VPN S2S</div>
                    <div class="connection-type">IPsec Tunnel</div>
                    <div class="connection-type">IKEv2 Protocol</div>
                    <div style="font-size: 40px; margin: 15px 0;">‚ü∑</div>
                    <div class="latency">Latency: 15-30ms RTT</div>
                    <div class="latency">Throughput: 100Mbps</div>
                    <div style="margin-top: 15px; padding: 10px; background: rgba(0, 0, 0, 0.3); border-radius: 8px; font-size: 12px;">
                        <strong>Route Tables:</strong><br>
                        10.0.0.0/16 (Azure VNet) ‚Üî 192.168.1.0/24 (On-Prem)<br>
                        <strong>Ports:</strong> UDP 500, 4500 (IKEv2/IPsec)
                    </div>
                </div>
                
                <div style="margin-top: 20px; padding: 15px; background: rgba(255, 215, 0, 0.1); border: 1px solid #ffd700; border-radius: 10px; text-align: center;">
                    <div style="font-size: 14px; color: #ffd700; margin-bottom: 10px;"><strong>Data Flow Architecture</strong></div>
                    <div style="font-size: 12px; color: #aaa;">
                        <div style="margin: 5px 0;">üü¢ Azure ‚Üí Edge: Trading signals (WebSocket)</div>
                        <div style="margin: 5px 0;">üî¥ Edge ‚Üí Azure: Telemetry + metrics</div>
                        <div style="margin: 5px 0;">üü° Bidirectional: Keepalive heartbeat</div>
                    </div>
                </div>
            </div>
            
            <!-- On-Premises Infrastructure -->
            <div class="onprem-section">
                <div class="onprem-header">
                    <span>üñ•Ô∏è</span>
                    ON-PREMISES EDGE INFRASTRUCTURE
                    <span class="cost-badge">$5/mo OpEx</span>
                </div>
                
                <div class="component">
                    <div class="component-title">
                        <span class="component-icon">üõ°Ô∏è</span>
                        Edge Gateway / Firewall
                    </div>
                    <div class="component-desc">
                        VPN client endpoint configured<br>
                        NAT traversal enabled<br>
                        Port forwarding for VPN ingress<br>
                        DDoS protection at edge
                    </div>
                    <div class="component-tech">pfSense / Enterprise Firewall</div>
                </div>
                
                <div class="component">
                    <div class="component-title">
                        <span class="component-icon">‚ò∏Ô∏è</span>
                        Kubernetes Cluster (minikube/k3s)
                    </div>
                    <div class="component-desc">
                        Single-node K8s cluster on edge<br>
                        3 namespaces: trading-bots, monitoring, system<br>
                        Persistent volume provisioning<br>
                        LoadBalancer via MetalLB
                    </div>
                    <div class="component-tech">Kubernetes v1.28+ | Docker runtime</div>
                    <div class="flow-indicator">
                        <div class="flow-dot flow-in"></div>
                        Pulls images from ACR
                    </div>
                </div>
                
                <div class="component">
                    <div class="component-title">
                        <span class="component-icon">üé©</span>
                        Helm Charts & Releases
                    </div>
                    <div class="component-desc">
                        Chart: spy-trading-bot (v1.2.0)<br>
                        Values: dev.yaml / prod.yaml<br>
                        Release management with rollback<br>
                        Templated configurations
                    </div>
                    <div class="component-tech">Helm 3 | Chart versioning</div>
                </div>
                
                <div class="component">
                    <div class="component-title">
                        <span class="component-icon">üê≥</span>
                        Trading Bot Pods (Deployment)
                    </div>
                    <div class="component-desc">
                        Replicas: 3 (High Availability)<br>
                        Image: acr.azurecr.io/spy-bot:v1.2<br>
                        Resource limits: 512Mi RAM, 500m CPU<br>
                        Rolling update strategy
                    </div>
                    <div class="component-tech">Pod: spy-trading-bot | Python 3.11</div>
                    <div class="flow-indicator">
                        <div class="flow-dot flow-in"></div>
                        Ingests: Real-time anomaly signals
                    </div>
                </div>
                
                <div class="component">
                    <div class="component-title">
                        <span class="component-icon">üîç</span>
                        Liveness & Readiness Probes
                    </div>
                    <div class="component-desc">
                        HTTP health checks every 10s<br>
                        Auto-restart on failure<br>
                        Graceful shutdown (30s timeout)<br>
                        Zero-downtime deployments
                    </div>
                    <div class="component-tech">K8s Health Checks</div>
                </div>
                
                <div class="component">
                    <div class="component-title">
                        <span class="component-icon">üìà</span>
                        IBKR TWS Gateway (Containerized)
                    </div>
                    <div class="component-desc">
                        Docker image: ibkr-gateway:stable<br>
                        StatefulSet for persistent connection<br>
                        Paper trading account endpoint<br>
                        Ultra-low latency local processing
                    </div>
                    <div class="component-tech">K8s StatefulSet | TWS API 9.81+</div>
                    <div class="flow-indicator">
                        <div class="flow-dot flow-out"></div>
                        Executes orders on IBKR infrastructure
                    </div>
                </div>
                
                <div class="component">
                    <div class="component-title">
                        <span class="component-icon">‚öôÔ∏è</span>
                        ConfigMaps & Secrets
                    </div>
                    <div class="component-desc">
                        ConfigMap: Trading strategies, bot config<br>
                        Secrets: IBKR credentials, Azure keys<br>
                        Environment-specific configurations<br>
                        Hot-reload without pod restart
                    </div>
                    <div class="component-tech">K8s ConfigMaps & Secrets</div>
                </div>
                
                <div class="component">
                    <div class="component-title">
                        <span class="component-icon">üíæ</span>
                        Persistent Volumes
                    </div>
                    <div class="component-desc">
                        PV: 10GB for SQLite database<br>
                        PV: 5GB for trade logs<br>
                        PV: 2GB for cache<br>
                        Local storage class provisioner
                    </div>
                    <div class="component-tech">K8s PV/PVC | Local storage</div>
                </div>
                
                <div class="component">
                    <div class="component-title">
                        <span class="component-icon">üìä</span>
                        Monitoring Stack (Namespace: monitoring)
                    </div>
                    <div class="component-desc">
                        Prometheus for metrics collection<br>
                        Grafana dashboards (K8s + Trading)<br>
                        AlertManager for notifications<br>
                        Node Exporter for host metrics
                    </div>
                    <div class="component-tech">Prometheus + Grafana + AlertManager</div>
                </div>
                
                <div class="component">
                    <div class="component-title">
                        <span class="component-icon">üìù</span>
                        Telemetry Agent
                    </div>
                    <div class="component-desc">
                        Forwards logs to Azure Monitor<br>
                        Performance metrics collection<br>
                        Connection health monitoring<br>
                        Local alerting system
                    </div>
                    <div class="component-tech">Azure Monitor Agent / Fluentd</div>
                    <div class="flow-indicator">
                        <div class="flow-dot flow-out"></div>
                        Telemetry ‚Üí Application Insights
                    </div>
                </div>
                
                <div class="component">
                    <div class="component-title">
                        <span class="component-icon">üíæ</span>
                        Edge Data Store
                    </div>
                    <div class="component-desc">
                        Local signal cache and backup<br>
                        Trade execution history<br>
                        Strategy configuration cache<br>
                        Failover data persistence
                    </div>
                    <div class="component-tech">SQLite3 / Redis</div>
                </div>
                
                <div class="component">
                    <div class="component-title">
                        <span class="component-icon">üîî</span>
                        Watchdog Service
                    </div>
                    <div class="component-desc">
                        VPN connection health monitoring<br>
                        Auto-restart on trading engine failure<br>
                        Health checks every 30s<br>
                        Email/Telegram alert integration
                    </div>
                    <div class="component-tech">systemd / Windows Service Manager</div>
                </div>
            </div>
        </div>
        
        <!-- External Services -->
        <div class="external-section">
            <div class="external-header">üåç EXTERNAL SERVICE INTEGRATIONS</div>
            <div class="external-grid">
                <div class="component">
                    <div class="component-title">
                        <span class="component-icon">üìä</span>
                        Interactive Brokers API
                    </div>
                    <div class="component-desc">
                        Real-time market data feed<br>
                        Order execution gateway<br>
                        Paper trading sandbox environment<br>
                        TWS API integration
                    </div>
                    <div class="component-tech">IBKR TWS API | $4.50/mo data subscription</div>
                </div>
                
                <div class="component">
                    <div class="component-title">
                        <span class="component-icon">üêô</span>
                        GitHub Enterprise
                    </div>
                    <div class="component-desc">
                        Source code repository<br>
                        Terraform state versioning<br>
                        CI/CD pipeline automation<br>
                        Security vulnerability scanning
                    </div>
                    <div class="component-tech">GitHub Actions | Free tier</div>
                </div>
                
                <div class="component">
                    <div class="component-title">
                        <span class="component-icon">üìß</span>
                        Email Gateway
                    </div>
                    <div class="component-desc">
                        Alert notification delivery<br>
                        Trade execution confirmations<br>
                        System health reports<br>
                        SLA monitoring alerts
                    </div>
                    <div class="component-tech">SendGrid API | Free tier (100/day)</div>
                </div>
                
                <div class="component">
                    <div class="component-title">
                        <span class="component-icon">üì±</span>
                        Telegram Bot API (Optional)
                    </div>
                    <div class="component-desc">
                        Mobile push notifications<br>
                        Trade execution alerts<br>
                        Remote command interface<br>
                        Real-time status queries
                    </div>
                    <div class="component-tech">Telegram Bot API | Free</div>
                </div>
            </div>
        </div>
        
        <!-- Legend -->
        <div class="legend">
            <div class="legend-item">
                <div class="legend-color" style="background: #0078d4;"></div>
                <span>Azure Cloud Resources</span>
            </div>
            <div class="legend-item">
                <div class="legend-color" style="background: #0095ff;"></div>
                <span>Containers & Orchestration</span>
            </div>
            <div class="legend-item">
                <div class="legend-color" style="background: #ff8800;"></div>
                <span>On-Premises Edge Infrastructure</span>
            </div>
            <div class="legend-item">
                <div class="legend-color" style="background: #7c3aed;"></div>
                <span>Terraform Managed (IaC)</span>
            </div>
            <div class="legend-item">
                <div class="legend-color" style="background: #ffd700;"></div>
                <span>Site-to-Site VPN</span>
            </div>
            <div class="legend-item">
                <div class="legend-color" style="background: #00ff88;"></div>
                <span>Data Flow / Telemetry</span>
            </div>
        </div>
        
        <!-- Cost Breakdown -->
        <div style="margin-top: 40px; padding: 25px; background: rgba(0, 0, 0, 0.3); border-radius: 15px;">
            <h2 style="text-align: center; color: #00d4ff; margin-bottom: 20px;">üí∞ MONTHLY OPERATING COST BREAKDOWN</h2>
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px;">
                <div style="background: rgba(0, 255, 136, 0.1); padding: 15px; border-radius: 10px; border-left: 4px solid #00ff88;">
                    <div style="font-size: 18px; font-weight: bold; margin-bottom: 10px;">Azure Cloud</div>
                    <div style="font-size: 13px; line-height: 1.8;">
                        VPN Gateway: $27<br>
                        App Service B1: $13<br>
                        Static Web App: $0<br>
                        SignalR Free: $0<br>
                        Storage: $1<br>
                        App Insights: $5<br>
                        Container Registry (Basic): $5<br>
                        Bandwidth: $2<br>
                        <div style="border-top: 1px solid #00ff88; margin-top: 10px; padding-top: 10px; font-weight: bold;">
                            TOTAL AZURE: ~$53/mo
                        </div>
                    </div>
                </div>
                
                <div style="background: rgba(255, 136, 0, 0.1); padding: 15px; border-radius: 10px; border-left: 4px solid #ff8800;">
                    <div style="font-size: 18px; font-weight: bold; margin-bottom: 10px;">On-Premises Infrastructure</div>
                    <div style="font-size: 13px; line-height: 1.8;">
                        Compute node: $0 (existing asset)<br>
                        Power consumption: ~$5<br>
                        Network connectivity: $0 (existing)<br>
                        Software licenses: $0 (OSS stack)<br>
                        <div style="border-top: 1px solid #ff8800; margin-top: 10px; padding-top: 10px; font-weight: bold;">
                            TOTAL ON-PREMISES: ~$5/mo OpEx
                        </div>
                    </div>
                </div>
                
                <div style="background: rgba(0, 212, 255, 0.1); padding: 15px; border-radius: 10px; border-left: 4px solid #00d4ff;">
                    <div style="font-size: 18px; font-weight: bold; margin-bottom: 10px;">External Services</div>
                    <div style="font-size: 13px; line-height: 1.8;">
                        IBKR Market Data: $4.50<br>
                        GitHub: $0 (free tier)<br>
                        SendGrid: $0 (free tier)<br>
                        Telegram: $0<br>
                        <div style="border-top: 1px solid #00d4ff; margin-top: 10px; padding-top: 10px; font-weight: bold;">
                            TOTAL EXTERNAL SERVICES: ~$4.50/mo
                        </div>
                    </div>
                </div>
            </div>
            <div style="text-align: center; margin-top: 30px; padding: 20px; background: linear-gradient(90deg, rgba(0, 255, 136, 0.2), rgba(0, 212, 255, 0.2)); border-radius: 10px;">
                <div style="font-size: 24px; font-weight: bold; color: #00ff88;">
                    üíµ TOTAL MONTHLY OPERATING COST: ~$62.50
                </div>
                <div style="font-size: 14px; color: #aaa; margin-top: 10px;">
                    Enterprise-grade hybrid cloud infrastructure with container orchestration | Fully scalable | 99.9% SLA uptime
                </div>
            </div>
        </div>
        
        <!-- Tech Stack Summary -->
        <div style="margin-top: 40px; padding: 25px; background: rgba(124, 58, 237, 0.1); border-radius: 15px; border: 2px solid #7c3aed;">
            <h2 style="text-align: center; color: #a78bfa; margin-bottom: 20px;">üõ†Ô∏è COMPLETE TECHNOLOGY STACK</h2>
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 15px; font-size: 13px;">
                <div>
                    <div style="font-weight: bold; color: #00d4ff; margin-bottom: 8px;">Infrastructure as Code</div>
                    ‚Ä¢ Terraform 1.6+<br>
                    ‚Ä¢ Azure Provider<br>
                    ‚Ä¢ GitHub Actions<br>
                    ‚Ä¢ Git version control
                </div>
                <div>
                    <div style="font-weight: bold; color: #00d4ff; margin-bottom: 8px;">Containers & Orchestration</div>
                    ‚Ä¢ Docker 24+<br>
                    ‚Ä¢ Kubernetes 1.28+<br>
                    ‚Ä¢ Helm 3<br>
                    ‚Ä¢ minikube / k3s<br>
                    ‚Ä¢ kubectl CLI
                </div>
                <div>
                    <div style="font-weight: bold; color: #00d4ff; margin-bottom: 8px;">Cloud Platform</div>
                    ‚Ä¢ Azure App Service<br>
                    ‚Ä¢ Azure VPN Gateway<br>
                    ‚Ä¢ Azure SignalR<br>
                    ‚Ä¢ Azure Monitor<br>
                    ‚Ä¢ Azure Key Vault<br>
                    ‚Ä¢ Azure Container Registry
                </div>
                <div>
                    <div style="font-weight: bold; color: #00d4ff; margin-bottom: 8px;">Backend</div>
                    ‚Ä¢ Python 3.11<br>
                    ‚Ä¢ Flask / FastAPI<br>
                    ‚Ä¢ asyncio / WebSockets<br>
                    ‚Ä¢ IBKR TWS API<br>
                    ‚Ä¢ pandas, numpy
                </div>
                <div>
                    <div style="font-weight: bold; color: #00d4ff; margin-bottom: 8px;">Frontend</div>
                    ‚Ä¢ HTML5 + CSS3<br>
                    ‚Ä¢ JavaScript (Vanilla)<br>
                    ‚Ä¢ Canvas API<br>
                    ‚Ä¢ WebSocket client
                </div>
                <div>
                    <div style="font-weight: bold; color: #00d4ff; margin-bottom: 8px;">Networking</div>
                    ‚Ä¢ IPsec VPN<br>
                    ‚Ä¢ Site-to-Site<br>
                    ‚Ä¢ NSG rules<br>
                    ‚Ä¢ Static routing<br>
                    ‚Ä¢ MetalLB (K8s)
                </div>
                <div>
                    <div style="font-weight: bold; color: #00d4ff; margin-bottom: 8px;">Monitoring</div>
                    ‚Ä¢ Application Insights<br>
                    ‚Ä¢ Log Analytics<br>
                    ‚Ä¢ Prometheus<br>
                    ‚Ä¢ Grafana<br>
                    ‚Ä¢ AlertManager
                </div>
                <div>
                    <div style="font-weight: bold; color: #00d4ff; margin-bottom: 8px;">Storage & Data</div>
                    ‚Ä¢ Azure Table Storage<br>
                    ‚Ä¢ SQLite (edge)<br>
                    ‚Ä¢ Redis (cache)<br>
                    ‚Ä¢ K8s Persistent Volumes
                </div>
            </div>
        </div>
    </div>
</body>
</html>