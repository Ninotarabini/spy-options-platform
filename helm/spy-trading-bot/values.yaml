# SPY Trading Bot - Helm Chart Values (Defaults)

image:
  registry: acrspyoptions.azurecr.io
  pullPolicy: Always
  pullSecrets:
    - acr-secret

detector:
  replicaCount: 1  # Phase 9.1: Single replica for validation
  image:
    repository: spy-detector
    tag: v1.32
  resources:
    requests:
      memory: "512Mi"
      cpu: "250m"
    limits:
      memory: "1Gi"
      cpu: "500m"

backend:
  replicaCount: 2
  image:
    repository: spy-backend
    tag: v2.7
  resources:
    requests:
      memory: "256Mi"
      cpu: "250m"
    limits:
      memory: "512Mi"
      cpu: "500m"
# Frontend Configuration
frontend:
  replicaCount: 2
  image:
    repository: spy-frontend
    tag: v2.11
  environment: "production"
  resources:
    requests:
      memory: "64Mi"
      cpu: "100m"
    limits:
      memory: "128Mi"
      cpu: "200m"

bot:
  replicaCount: 0
  image:
    repository: spy-trading-bot
    tag: v1.6
  resources:
    requests:
      memory: "256Mi"
      cpu: "250m"
    limits:
      memory: "512Mi"
      cpu: "500m"

# IBKR Gateway Configuration
ibkrGateway:
  image:
    repository: ghcr.io/gnzsnz/ib-gateway
    tag: stable
  tradingMode: live
  resources:
    requests:
      memory: "512Mi"
      cpu: "250m"
    limits:
      memory: "1Gi"
      cpu: "500m"
  # Persistence for trusted device session + settings
  persistence:
    enabled: true
    storageClass: "local-path"
    size: 1Gi
  # IBC/Gateway env vars (documented at github.com/gnzsnz/ib-gateway-docker)
  autoRestartTime: "11:50 PM"
  twofaTimeoutAction: "restart"
  reloginAfterTwofaTimeout: "yes"
  twofaExitInterval: "60"
  existingSessionDetectedAction: "primary"
  saveTwsSettings: ""
  twsSettingsPath: "/home/ibgateway/settings"
  vncPassword: "temporal123"

storage:
  database:
    size: 10Gi
    path: /mnt/k8s-storage/database
  logs:
    size: 5Gi
    path: /mnt/k8s-storage/logs
  cache:
    size: 2Gi
    path: /mnt/k8s-storage/cache

config:
  logLevel: "INFO"
  strategyType: "anomaly-arbitrage"
  maxPositions: 5
  anomalyThreshold: 0.15
  scanInterval: 60
  ibkrHost: "ibkr-gateway-service"
  ibkrPort: 4003
  ibkrClientId: 1
  strikesRangePercent: 1.0


